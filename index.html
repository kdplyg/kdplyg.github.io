<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KdpLyg — Proyecto Editorial KDP</title>
  <meta name="description" content="Emprendimiento editorial digital enfocado en libros de bajo contenido para el mercado estadounidense.">
  <link rel="stylesheet" href="style-public.css" />
</head>
<body>
  <header>
    <h1>KdpLyg</h1>
    <p>Proyecto Editorial KDP</p>
  </header>

  <main>
    <!-- Sección 1: Información General -->
    <section class="section">
      <h2>Información General del Negocio</h2>
      <p>
        <strong>KdpLyg</strong> es un emprendimiento editorial digital enfocado en la publicación semanal de <strong>libros de bajo contenido</strong>, 
        como cuadernos de costura, libros para colorear, juegos y patrones.
      </p>
      <p>
        Nuestro mercado objetivo es el <strong>mercado estadounidense</strong>, y publicamos a través de la plataforma <strong>Amazon KDP</strong>.
      </p>
      <p>
        Operamos bajo distintos seudónimos según el nicho, como <em>HL Coloring</em> o <em>Confecciones R</em>, 
        con el objetivo de escalar la producción mediante la delegación de tareas clave y mantener un ritmo constante de publicación.
      </p>
    </section>

    <!-- Sección 2: Formulario de Postulación -->
    <section class="section">
      <h2>¿Eres diseñador gráfico?</h2>
      <p>
        Si usted es un <strong>creador visual</strong> o <strong>diseñador gráfico</strong> que busca <strong>proyectos semanales</strong>, 
        le invitamos a postularse.
      </p>
      <p>
        <strong>¿A quién buscamos?</strong> Personas que demuestren <strong>dominio de herramientas vectoriales</strong> 
        (Illustrator, Inkscape o CorelDRAW) y que posean <strong>buen criterio visual</strong>. 
        No se requiere título profesional, solo el dominio de las herramientas.
      </p>
      <a href="https://forms.gle/bXfsLo81vEFu43ZA6" class="cta-button" target="_blank" rel="noopener">
        Postularse como diseñador
      </a>
    </section>

    <!-- Sección 3: Catálogo Dinámico -->
    <section class="section">
      <h2>Catálogo de Títulos Publicados</h2>
      <p>Explora algunos de nuestros libros disponibles en Amazon:</p>
      <div id="catalogo-container">
        <p>Cargando catálogo…</p>
      </div>
    </section>
  </main>

  <footer>
    <p>© KdpLyg — Proyecto Editorial KDP</p>
  </footer>

  <script>
    // Cargar y mostrar el catálogo desde catalogo.json
    document.addEventListener("DOMContentLoaded", () => {
      fetch('catalogo.json')
        .then(response => response.json())
        .then(data => {
          const container = document.getElementById('catalogo-container');
          if (!Array.isArray(data) || data.length === 0) {
            container.innerHTML = '<p>No hay productos disponibles.</p>';
            return;
          }

          const html = data.map(producto => {
            // Extraer imagen (prioriza mainImage, luego imageUrlList[0])
            let imageUrl = '';
            if (producto.mainImage && producto.mainImage.imageUrl) {
              imageUrl = producto.mainImage.imageUrl.trim();
            } else if (Array.isArray(producto.imageUrlList) && producto.imageUrlList.length > 0) {
              imageUrl = producto.imageUrlList[0].trim();
            }

            // Limpiar título (opcional: puedes dejarlo completo)
            const title = producto.title || 'Sin título';
            const shortDesc = producto.productDescription 
              ? (producto.productDescription.split('.')[0] + '.') 
              : 'Descripción no disponible';
            const url = producto.url || '#';

            return `
              <div class="book-card">
                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="book-image">` : ''}
                <div class="book-info">
                  <h3>${title}</h3>
                  <p class="book-desc">${shortDesc}</p>
                  <a href="${url}" target="_blank" rel="noopener" class="book-link">Ver en Amazon</a>
                </div>
              </div>
            `;
          }).join('');

          container.innerHTML = `<div class="catalog-grid">${html}</div>`;
        })
        .catch(err => {
          document.getElementById('catalogo-container').innerHTML = '<p class="error">Error al cargar el catálogo.</p>';
          console.error(err);
        });
    });
  </script>
</body>
</html>
